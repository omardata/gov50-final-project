---
title: "Gov 50 Final Project"
author: "Omar Cano"
description: "My final project"
output:
  distill::distill_article:
    self_contained: false
---



## Project thoughts

I am interested in exploring data related to the influence of international organizations on the policy of their member-states. International relations is broadly my area of interest, and I am interested in looking perhaps at  how IOs are a force that can shape state's decision patterns in particular policy domains. 

## Reasearch Question
I aim to use Eric Voeten's member-state votes in the United Nations General Assembly. I will explore differences between UNGA voting under the US Democratic and Republican administrations. The question is really this, under which administrations did we see the greatest UNGA alignment with the US stance? My hypothesis is that under the Republican Administrations we saw less voting alignment, and under democratic leadership we saw greater alignment. 

My variable of interest is the measure of US alignment in the UNGA.
My explanatory variable is whether or not there is a Republican or Democrat in the White House. 


I will cover the years from the Cater Administration until the Obama Administration. 


```{r loadata, echo = FALSE}
library(tidyverse)
library(dplyr)
install.packages("lubridate")
library(lubridate)

load("~/Desktop/GOV 50/Projects/Final/final_project/data/un_votes.RData") ## 

ideal <-  read.csv("data/IdealpointestimatesAll_Jul2023.csv")
lead <- read_dta("data/WhyLeadersFightLEADDataset_updated.dta")
presidents <- read.csv("data/presidents.csv")

presidents <- presidents|>
  select(Presidency, President, Took.office, Left.office, Party)

View(ideal)
View(completeVotes)
View(presidents)
## Create the presidents tibble for dates. 


completeVotes|> summary()


```

## Prepping Data

```{r}
## Editing Dates on President's to Match UNGA Votes Format 
presidents <- presidents |> 
  mutate(left_office = as.Date(Left.office, format = "%d/%m/%Y"),
         took_office = as.Date(Took.office, format = "%d/%m/%Y"))

## Vote data to correct date format
completeVotes2 <- completeVotes|> mutate(
  date = as.Date(date, format = "%Y-%m-%d"))

View(completeVotes2)

##Subset UN Data, want only carter to Obama Votes
carter_obama <- completeVotes2|>
  filter( date > "1977-01-20" & date < "2017-01-20") ## needed to use just greater or lesser than

View(carter_obama)

##creating vector of democrat presidents 
democratic_indiators <- c("1", "4", "6")

##Assigning Presidency, Rep or Dem, and also president identifier 1 for carter, 2 for Reagan etc 
cart <- carter_obama|>
    mutate(pres_indicator = case_when( (date > "1977-01-20" & date < "1981-01-20") ~ "1",
                                       (date > "1981-01-20" & date < "1989-01-20") ~ "2",
                                       (date > "1989-01-20" & date < "1993-01-20") ~ "3",
                                       (date > "1993-01-20" & date < "2001-01-20") ~ "4",
                                       (date > "2001-01-20" & date < "2009-01-20") ~ "5",
                                       (date > "2009-01-20" & date < "2017-01-20") ~ "6")
           )|>
  mutate(democrat = if_else(pres_indicator %in% democratic_indiators, "1", "0"))|>
  mutate(party = if_else(democrat == 1, "Democrat", "Republican"))|>
  mutate(president = case_when(pres_indicator == 1 ~ "Jimmy Carter",
                               pres_indicator == 2 ~ "Ronald Reagan",
                               pres_indicator == 3 ~ "George H. W. Bush",
                               pres_indicator == 4 ~ "Bill Clinton",
                               pres_indicator == 5 ~ "George W. Bush",
                               pres_indicator == 6 ~ "Barack Obama")
  )

View(cart)





cart <- carter_obama|>
    mutate(pres_indicator = case_when( (date > `1977-01-20` & date < `1981-01-20`) ~ "1",
                                       (date > `1981-01-20` & date < `1989-01-20`) ~ "2",
                                       (date > `1989-01-20` & date < `1993-01-20`) ~ "3",
                                       (date > `1993-01-20` & date < `2001-01-20`) ~ "4",
                                       (date > `2001-01-20` & date < `2009-01-20`) ~ "5",
                                       (date > `2009-01-20` & date < `2017-01-20`) ~ "6"
           ))
  

carter_obama|> mutate(
  
)

  
filter_by_time(.data, .date_var, .start_date = "start", .end_date = "end")

completeVotes|> summary()

carter_obama

View(carter_obama)
```



```{r}
completeVotes |> filter (importantvote ==1, year >= 2018) 
```


```{r}
# Testing trump 
votes_trump<- completeVotes|>
  filter(year >= 2017)|>
  group_by(rcid)|> 
  summarize(mean = mean(vote ==1) )

votes_trump

View(completeVotes)

unique(completeVotes$year)
votes_trump|> summarize(mean = mean(mean))


votes_obama <- completeVotes|>
  filter(year < 2017 & year>2008)|>
  group_by(rcid)|> 
  summarize(mean = mean(vote ==1) )
votes_obama|> summarize (mean = mean(mean))


  group_by(rcid)|>
  summarize(mean_yes = mean(vote == 1))|>
  ggplot( mapping = aes( x =mean_yes))+
  geom_histogram(binwidth = .05)





## From LEAD data
lead_trump<- lead |> filter(year >= 2019)
lead
unique(lead_post1975$idacr)



```






## Scrap Writing



I want to explore the extent to which there is state agreement on certain votes? 
The effect of something on voting coincidence in a particular time period and in a particular topic? 

The effect of political turn-over in the UNGA voting coincidence?
The role of leaders?
The role of some country-level feature?
 
 
Do small states agree more, do large states disagree more?
Democratic or Republican presidents at the UN?
Are there any statistical differences?



Which subset of states? 
Which votes, how to measure voting coincidence. Mutate,and create new variable that states coindidence or no coindidence. There are 

Domestic Turn-over, or... international factors.. 

 
What are valid and easy paper topics?
I just need either an easy GOV 50 paper, or an easy overlap between the GOV 50 paper and the UN paper. 

Do work on the UN paper first. Maybe whether or not there is an overlap. 


Can also just do a single-time analysis. 
Need something to test about the countries. '

